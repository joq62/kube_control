%%%-------------------------------------------------------------------
%%% @author c50 <joq62@c50>
%%% @copyright (C) 2023, c50
%%% @doc
%%%
%%% @end
%%% Created : 15 Sep 2023 by c50 <joq62@c50>
%%%-------------------------------------------------------------------
-module(new_cluster_test).

-include("node.hrl").
-include("appl.hrl").
-include("control_config.hrl").



-define(ClusterId,"test_cluster").
-define(HostNameNumWorkers,[{"c50",6}]).

%% API
-export([start/0]).


%%%===================================================================
%%% API
%%%===================================================================

%%--------------------------------------------------------------------
%% @doc
%% @spec
%% @end
%%--------------------------------------------------------------------
start()->
    io:format("Start ~p~n",[{?MODULE,?FUNCTION_NAME}]),
  
    ok=setup(),
    ok=new_cluster(),

    io:format("Test OK !!! ~p~n",[?MODULE]),
    timer:sleep(2000),
    ok.

%%%===================================================================
%%% Internal functions
%%%===================================================================


%%--------------------------------------------------------------------
%% @doc
%% 
%% @end
%%--------------------------------------------------------------------
new_cluster()->
    io:format("Start ~p~n",[{?MODULE,?FUNCTION_NAME}]),
    {ok,[{ok,"c50",'kubelet_a@c50'}]}=kube_control:new_cluster(?ClusterId,?HostNameNumWorkers),
    ok.


%%--------------------------------------------------------------------
%% @doc
%% 
%% @end
%%--------------------------------------------------------------------
setup()->
    io:format("Start ~p~n",[{?MODULE,?FUNCTION_NAME}]),
  
    ok.
